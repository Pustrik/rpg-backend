{"version":3,"file":"messages-repo.js","sourceRoot":"","sources":["../../../../src/repositories/redis/messages-repo.ts"],"names":[],"mappings":";;AAAA,6DAAqD;AAGrD,MAAqB,YAAY;IAE7B,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAiB;QAChC,MAAM,IAAI,GAAG,MAAM,gBAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAC1C,IAAG,IAAI,GAAG,CAAC;YACP,MAAM,IAAI,CAAC,MAAM,EAAE,CAAC;QACxB,MAAM,gBAAK,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;IAC3D,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,MAAM;QACf,MAAM,gBAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACjC,CAAC;IAED,MAAM,CAAC,KAAK,CAAC,QAAQ;QACjB,MAAM,GAAG,GAAO,MAAM,gBAAK,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACrD,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IAC7C,CAAC;CACJ;AAjBD,+BAiBC","sourcesContent":["import {redis} from \"../../databases/redis/redis-db\";\nimport IMessage from \"../../../interfaces/i-message\";\n\nexport default class MessagesRepo {\n\n    static async write(message: IMessage) {\n        const size = await redis.LLEN('messages');\n        if(size > 9)\n            await this.remove();\n        await redis.LPUSH('messages', JSON.stringify(message));\n    }\n\n    static async remove() {\n        await redis.RPOP('messages');\n    }\n\n    static async getCache() {\n        const rez: [] = await redis.LRANGE('messages', 0, 9);\n        return rez.map((mes) => JSON.parse(mes));\n    }\n}"]}