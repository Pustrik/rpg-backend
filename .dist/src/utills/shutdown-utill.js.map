{"version":3,"file":"shutdown-utill.js","sourceRoot":"","sources":["../../../src/utills/shutdown-utill.ts"],"names":[],"mappings":";;;;;AAAA,2DAA2C;AAC3C,0FAAkE;AAElE,MAAM,gBAAgB,GAAG,KAAK,EAAE,MAAM,EAAE,EAAE;IACtC,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,IAAI,EAAE;QAC7B,OAAO,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC;QACvC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE;YACd,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAA;QACF,kBAAE,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE;YAChB,MAAM,sBAAY,CAAC,MAAM,EAAE,CAAC;YAC5B,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;QAC5C,CAAC,CAAC,CAAA;IACN,CAAC,CAAC,CAAA;AACN,CAAC,CAAA;AAED,kBAAe,gBAAgB,CAAC","sourcesContent":["import {io} from \"../socket/socket-server\";\nimport player_model from \"../databases/mongo/models/player-model\";\n\nconst gracefulShutdown = async (server) => {\n    process.on('SIGTERM', async () => {\n        console.info('SIGTERM сигнал получен');\n        server.close(() => {\n            console.log('Http сервер остановлен');\n        })\n        io.close(async () => {\n            await player_model.remove();\n            console.log('Socket сервер остановлен');\n        })\n    })\n}\n\nexport default gracefulShutdown;"]}